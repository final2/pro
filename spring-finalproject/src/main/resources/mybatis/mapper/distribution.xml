<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.finalproject.dao.DistributionDao">

	<!-- 거래처 등록 -->
	<insert id="insertClient" parameterType="Client">
		insert into client
		(no, name, isAdmit)
		values
		(myclient_seq.nextval, #{name}, #{isAdmit})
	</insert>
	
	<!-- 거래처 리스트 -->
	<select id="getClients" resultType="Client">
		select
			no		as no,
			name	as name,
			isAdmit as isAdmit
		from
			client
		order by 
			no asc
	</select>
	
	<!-- 번호로 거래처 조회 -->
	<select id="getClientByNo" parameterType="int" resultType="Client">
		select 
			c.no		as no,
			c.name		as name,
			c.isAdmit	as isAdmit,
			p.name		as product,
			d.qty		as qty
		from 
			client c, product p, client_detail d
		where 
			c.no = d.client_no 
		and p.no = d.product_no
		and c.no = #{value}
	</select>
	
	<!-- 거래처 수정 -->
	<update id="updateClient" parameterType="Client">
		update client
			set
				name = #{name},
				isAdmit = #{isAdmit}
		where no = #{no}
	</update> 
</mapper>