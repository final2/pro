<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.finalproject.dao.EmployeeDao">
	
	<!-- 로그인 체크하기 -->
	<select id="loginByNo" parameterType="int" resultType="Employee">
		select 
			no, 
			name, 
			phone, 
			email, 
			address, 
			birth, 
			department 	as dept, 
			position, 
			salary, 
			photo, 
			hiredate 	as hireDate, 
			password, 
			retiredate	as retireDate, 
			remarks
		from employee
		where no = #{no}
	</select>
	
	<!-- 사원등록 -->
	<insert id="insertEmployee" parameterType="Employee">
		insert into employee (no, name, phone, email, address, birth, department, position, salary, photo, hiredate, password, retiredate, remarks )
		values (myemp_seq.nextval, #{name}, #{phone}, #{email}, #{address}, #{birth}, #{dept}, #{position}, 0, #{photo}, sysdate, #{password}, null, '-')
	</insert>
	
	<!-- 모든 근무지점 -->
	<select id="getAllBranch" resultType="Branch">
		select name
		from branch		
	</select>
	
	<!-- 모든 사원 조회하기 -->
	<select id="getAllEmployees" resultType="Employee">
		select 
			no, 
			name, 
			department 	as dept, 
			position
		from employee
	</select>

	<!-- 사원번호로 사원정보 가져오기 -->
	<select id="getEmployeeByNo" parameterType="int" resultType="Employee">
		select 
			no, 
			name, 
			phone, 
			email, 
			address, 
			birth, 
			department 	as dept, 
			position, 
			photo, 
			retiredate	as retireDate, 
			remarks
		from employee
		where no = #{no}
	</select>
	
	<!-- 사원번호로 근무지점 조회하기 -->
	<select id="getBranchListByNo" parameterType="int" resultType="Branch">
		select 
			B.name
		from employee E, branch B
		where E.no = B.employee_no
		and E.no = #{no}
	</select>
	
</mapper>